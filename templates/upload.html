{% extends 'base.html' %}

{% block title %}{{ project.name }} - ì‚¬ì§„ ì—…ë¡œë“œ{% endblock %}

{% block content %}
<div style="margin-bottom: 24px;">
    <a href="{{ url_for('index') }}" style="color: var(--gray-500); text-decoration: none; font-size: 0.875rem;">
        â† í”„ë¡œì íŠ¸ ëª©ë¡
    </a>
    <h1 style="font-size: 1.5rem; font-weight: 700; margin-top: 8px;">{{ project.name }}</h1>
    {% if project.description %}
        <p style="color: var(--gray-500); margin-top: 4px;">{{ project.description }}</p>
    {% endif %}
</div>

<form method="POST" enctype="multipart/form-data" id="uploadForm">
    <div class="card">
        <div class="form-group">
            <label class="form-label">ì—…ë¡œë” ì´ë¦„ *</label>
            <input type="text" name="uploader_name" class="form-input" 
                   placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" required
                   id="uploaderName">
        </div>
        
        <div class="form-group">
            <label class="form-label">ì‚¬ì§„ ì„ íƒ *</label>
            <div class="upload-area" id="uploadArea">
                <input type="file" name="photos" multiple accept="image/*" id="fileInput" required>
                <div class="upload-icon">ğŸ“·</div>
                <p class="upload-text">
                    <strong>í„°ì¹˜í•˜ì—¬ ì‚¬ì§„ ì„ íƒ</strong><br>
                    <span style="font-size: 0.875rem;">JPG, PNG, GIF ì§€ì›</span>
                </p>
            </div>
            <p id="fileCount" style="margin-top: 8px; color: var(--gray-500); font-size: 0.875rem;"></p>
        </div>
    </div>
    
    <button type="submit" class="btn btn-primary btn-block" id="submitBtn">
        ğŸ“¤ ì—…ë¡œë“œí•˜ê¸°
    </button>
</form>
{% endblock %}

{% block extra_js %}
<script>
const uploadArea = document.getElementById('uploadArea');
const fileInput = document.getElementById('fileInput');
const fileCount = document.getElementById('fileCount');
const submitBtn = document.getElementById('submitBtn');

// í´ë¦­ìœ¼ë¡œ íŒŒì¼ ì„ íƒ
uploadArea.addEventListener('click', (e) => {
    if (e.target !== fileInput) {
        fileInput.click();
    }
});

// íŒŒì¼ ì„ íƒ ì‹œ ê°œìˆ˜ í‘œì‹œ
fileInput.addEventListener('change', () => {
    const count = fileInput.files.length;
    if (count > 0) {
        fileCount.textContent = `${count}ê°œ íŒŒì¼ ì„ íƒë¨`;
        submitBtn.textContent = `ğŸ“¤ ${count}ì¥ ì—…ë¡œë“œí•˜ê¸°`;
    } else {
        fileCount.textContent = '';
        submitBtn.textContent = 'ğŸ“¤ ì—…ë¡œë“œí•˜ê¸°';
    }
});

// ë“œë˜ê·¸ ì•¤ ë“œë¡­
uploadArea.addEventListener('dragover', (e) => {
    e.preventDefault();
    uploadArea.classList.add('dragover');
});

uploadArea.addEventListener('dragleave', () => {
    uploadArea.classList.remove('dragover');
});

uploadArea.addEventListener('drop', (e) => {
    e.preventDefault();
    uploadArea.classList.remove('dragover');
    fileInput.files = e.dataTransfer.files;
    fileInput.dispatchEvent(new Event('change'));
});

// í¼ ì œì¶œ ì‹œ ë²„íŠ¼ ë¹„í™œì„±í™”
document.getElementById('uploadForm').addEventListener('submit', () => {
    submitBtn.disabled = true;
    submitBtn.textContent = 'ì—…ë¡œë“œ ì¤‘...';
});
</script>
{% endblock %}
